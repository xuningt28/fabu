<?xml version="1.0" encoding="utf-8"?>
<configure>
<xmltree branch="gameinstall=game;zabbixinstall=zabbix"/>
<data_index>
 <info key="zone_id"  value="1371"/>
 <info key="au_ip"  value="10.11.2.240"/>
 <info key="uniq_ip"  value="10.11.2.240"/>
 <info key="local_id"  value="1371"/>
 <info key="intranet_ip"  value="10.11.5.112"/>
 <info key="intrawai_ip"  value="124.243.237.46"/>
 <info key="cross_ip"  value=""/>
 <info key="cross_nei_ip"  value=""/>
 <info key="server_open_time"  value=""/>
 <info key="server_open_datetime"  value=""/>
 <info key="hostname"  value="ahlm2_ledo_game81"/>
 <info key="ostype"  value="1"/>
 <info key="port_for_cross"  value="28993-51992,28994-51993,28995-51994,28996-51995,28997-51996,28998-51997,28999-51998,29000-51999"/>
 <info key="group"  value="乐道-81服-旱木林地"/>
 <info key="mcwy"  value="ledoAndroid_81"/>
</data_index>
<group>
    <host HOSTNAME="##hostname##" group="gate" osinfo="linux" manager_opt="xn" user="root">
      <ifcfg ipaddr="##intranet_ip##"/>
    </host>
  </group>
  
  <game name="1" package="/home/super/update/ahlm2package" version="NK1.0">

    
    <init_touchfile>
            <tf file="/root/gs.conf.m4" file_bk="/root/tmp.gs.conf.m4" owner="root.root" chmod="600" content="
define(\`GAME_TYPE&apos;, \`GS&apos;)dnl\n
define(\`MANAGER_SERVER_IP&apos;, \`127.0.0.1&apos;)dnl\n
define(\`LINK_INTERNAL_IP&apos;, \`0.0.0.0&apos;)dnl\n
define(\`LINK_EXTERNAL_IP&apos;, \`0.0.0.0&apos;)dnl\n
define(\`UNIQNAME_SERVER_IP&apos;,\`##uniq_ip##&apos;)dnl\n
define(\`AU_SERVER_IP&apos;, \`##au_ip##&apos;)dnl\n
define(\`STARTPORT&apos;, \`28993&apos;)dnl\n
define(\`ZONEID&apos;, \`##zone_id##&apos;)dnl\n
define(\`LINK_NUMBER&apos;, \`8&apos;)dnl\n
define(AU_ISEC_KEY, \`n1hxpxztozyxnsvk6RaycpmrCnrdds&apos;)\n
define(AU_OSEC_KEY, \`rdppjtaki1MxoHnsnaltiiwfjszs9l&apos;)\n
define(AU_SHARED_KEY, \`4khdwAAcjrg0eqfzazqcemdpgulnje&apos;)\n
define(AUANY_SERVER_IP, \`##au_ip##&apos;)\n
define(PLATFORM, \`6666&apos;)\n
define(AUANY_ISEC_KEY, \`oyvxyskVhnydfl8vgasqTuzee3bnbopl&apos;)\n
define(AUANY_OSEC_KEY, \`khSrmjpjrsarmks3aAfrvldn5zafuzdd&apos;)\n
define(\`GLOBALPORT&apos;, \`29033&apos;)dnl\n
define(\`GLOBAL_SERVER_IP&apos;,\`##au_ip##&apos;)dnl\n
define(\`ONLINE_NUM_INIT_HEALTH&apos;,\`3000&apos;)dnl\n
define(\`ONLINE_NUM_HEALTH&apos;,\`4200&apos;)dnl\n
define(\`ONLINE_NUM_MAX&apos;,\`5000&apos;)dnl\n
define(\`IP_FOR_CROSS&apos;,\`##intrawai_ip##&apos;)dnl\n
define(\`SERVER_OPEN_DATE&apos;,\`##server_open_time##&apos;)dnl\n
define(\`GAMEID&apos;,\`11&apos;)dnl\n
define(\`OS_TYPE&apos;,\`##ostype##&apos;)dnl\n
define(\`JVMMEMORY',\`-Xms16G -Xmx16G&apos;)dnl\n
define(\`PORT_FOR_CROSS&apos;,\`##port_for_cross##&apos;)dnl\n
            "/>

                
                    </init_touchfile>
<first_do_shell version="NK2.0">
<ds servername="##hostname##" do_shell="/bin/sh /root/bin/stop_game.sh"/>
<ds servername="##hostname##" do_shell="/bin/sh /home/super/update/ahlm2package/srcfile/gsxbin_export/install /root/gs.conf.m4"/>
<ds servername="##hostname##" do_shell="/bin/sed -i '/echo --------------------------------------------------------/aecho &quot;30 *\/6 * * * sh \/home\/super\/update\/shell_scripts\/Pro-110-ahlm-clear-data.sh &gt; \/dev\/null&quot; &gt;&gt; \/var\/spool\/cron/root&apos; /root/bin/start_game.sh"/>
</first_do_shell> 


<last_do_shell version="NK2.0">
<ds servername="##hostname##" do_shell="/usr/bin/monit  monitor 游戏进程监控"/>
<ds servername="##hostname##" do_shell=" sleep 10 "/>
<ds servername="##hostname##" do_shell=" /bin/date "/>
<ds servername="##hostname##" do_shell="echo ### 游戏检查 ###"/>
<ds servername="##hostname##" do_shell="echo ### 1  md5 check ###"/>
<ds servername="##hostname##" do_shell="/usr/bin/md5sum /home/super/update/ahlm2package/srcfile/gsxbin_export/gs/gsxdb.jar"/>
<ds servername="##hostname##" do_shell="/usr/bin/md5sum /root/server/gs/gsxdb.jar"/>
<ds servername="##hostname##" do_shell="echo ### 2 java process ###"/>
<ds servername="##hostname##" do_shell="/bin/ps -ef |grep java |grep -v grep |cut -c1-100"/>
<ds servername="##hostname##" do_shell="echo &quot;never&quot; > /sys/kernel/mm/transparent_hugepage/enabled"/>
<ds servername="##hostname##" do_shell="cat /sys/kernel/mm/transparent_hugepage/enabled"/>
<ds servername="##hostname##" do_shell="echo ### 游戏检查完毕 ###"/>
</last_do_shell>

<zabbix>
<first_do_shell>
<ds servername="##hostname##" do_shell="cp -r /home/super/update/ahlm2package/config/tool/zabbix/* /etc/zabbix/"/>
<ds servername="##hostname##" do_shell="/etc/init.d/zabbix-agent restart"/>
</first_do_shell>
</zabbix>           
 
</game>
 </configure>